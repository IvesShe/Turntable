window.__require=function t(e,i,s){function n(h,c){if(!i[h]){if(!e[h]){var r=h.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+h+"'")}h=r}var o=i[h]={exports:{}};e[h][0].call(o.exports,function(t){return n(e[h][1][t]||t)},o,o.exports,t,e,i,s)}return i[h].exports}for(var a="function"==typeof __require&&__require,h=0;h<s.length;h++)n(s[h]);return n}({Config:[function(t,e,i){"use strict";cc._RF.push(e,"730catGX3pP2547BYe95IC7","Config");var s=s||{};s.gearInfo=["2x","6x","2x","4x","5x","4x","8x","4x","3x","5x","3x","10x","6x","2x","2x","3x","10x","8x"],e.exports=s,cc._RF.pop()},{}],game:[function(t,e,i){"use strict";cc._RF.push(e,"e2f282WV95LgYDpNgvVr+PX","game");var s=t("Config");cc.Class({extends:cc.Component,properties:{wheelSp:{default:null,type:cc.Sprite},maxSpeed:{default:5,type:cc.Float,max:15,min:2},duration:{default:3,type:cc.Float,max:5,min:1,tooltip:"\u51cf\u901f\u524d\u65cb\u8f6c\u65f6\u95f4"},acc:{default:.1,type:cc.Float,max:.2,min:.01,tooltip:"\u52a0\u901f\u5ea6"},targetID:{default:0,type:cc.Integer,max:17,min:0,tooltip:"\u6307\u5b9a\u7ed3\u675f\u65f6\u7684\u9f7f\u8f6e"},springback:{default:!1,tooltip:"\u65cb\u8f6c\u7ed3\u675f\u662f\u5426\u56de\u5f39"},messageLabel:cc.Label},onLoad:function(){cc.log("....onload"),this.wheelState=0,this.curSpeed=0,this.spinTime=0,this.gearNum=18,this.defaultAngle=10,this.gearAngle=360/this.gearNum,this.wheelSp.node.angle=this.defaultAngle,this.finalAngle=0,this.effectFlag=0,this.turnFlag=!1,Math.random()>.5?this.springback=!0:this.springback=!1,cc.log("this.springback: "+this.springback),this.messageLabel.string="\u795d\u60a8\u4e2d\u5927\u734e",this.isEdit=!1},start:function(){cc.loader.loadRes("bgm",cc.AudioClip,function(t,e){cc.audioEngine.play(e,!0,.3)})},editBoxDidBegin:function(t){},editBoxDidChanged:function(t){},editBoxDidEndEditing:function(t){var e=parseInt(t.string);if(isNaN(e))return cc.sys.isBrowser,t.string="",void(this.targetID=Math.round(Math.random()*(this.gearNum-1)));(parseInt(t.string)<0||parseInt(t.string)>17)&&(t.string="",this.targetID=Math.round(Math.random()*(this.gearNum-1))),this.targetID=e,this.isEdit=!0,cc.log("targetID: "+this.targetID)},wheelTurn:function(){cc.log("begin spin"),0===this.wheelState&&(this.turnFlag||(this.turnFlag=!0),!1===this.isEdit&&(this.targetID=Math.round(Math.random()*(this.gearNum-1)),cc.log("targetID: "+this.targetID),this.isEdit=!0),this.decAngle=720,this.wheelState=1,this.curSpeed=0,this.spinTime=0,this.maxSpeed=12,this.messageLabel.string="\u795d\u60a8\u4e2d\u5927\u734e",Math.random()>.5?this.springback=!0:this.springback=!1,cc.log("this.springback: "+this.springback))},showRes:function(){this.messageLabel.string="\u606d\u559c\u5f97\u5230 ".concat(s.gearInfo[this.targetID]," \u7684\u734e\u9805"),this.isEdit=!1},update:function(t){if(0!==this.wheelState)if(this.effectFlag+=this.curSpeed,Math.abs(this.effectFlag)>=Math.abs(this.gearAngle)&&(this.audioID,this.audioID=cc.loader.loadRes("pass",cc.AudioClip,function(t,e){cc.audioEngine.play(e,!1,.5)}),this.effectFlag=0),1==this.wheelState)if(this.spinTime+=t,this.wheelSp.node.angle-=this.curSpeed,this.curSpeed<=this.maxSpeed)this.curSpeed+=this.acc;else{if(this.spinTime<this.duration)return;this.finalAngle=360-(18-this.targetID+1)*this.gearAngle+this.defaultAngle,cc.log("this.finalAngle: "+this.finalAngle),this.maxSpeed=this.curSpeed,this.springback&&(this.finalAngle+=this.gearAngle),this.wheelSp.node.angle=this.finalAngle,this.wheelState=2}else if(2==this.wheelState){var e=this.wheelSp.node.angle,i=e-this.finalAngle;if(this.curSpeed=this.maxSpeed*((this.decAngle+i)/this.decAngle)+.2,this.wheelSp.node.angle=e-this.curSpeed,this.decAngle+i<=0)if(cc.log("....\u505c\u6b62"),this.wheelState=0,this.wheelSp.node.angle=this.finalAngle,this.springback){this.audioID=cc.loader.loadRes("pass",cc.AudioClip,function(t,e){cc.audioEngine.play(e,!1,.5)});var s=cc.rotateBy(1.6,-this.gearAngle),n=cc.sequence(cc.delayTime(.05),s,cc.callFunc(this.showRes,this));this.wheelSp.node.runAction(n)}else this.showRes(),cc.log("rotation OK")}}}),cc._RF.pop()},{Config:"Config"}]},{},["Config","game"]);